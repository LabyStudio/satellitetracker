!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(o=o||self).satellite=t()}(this,function(){"use strict";var Ho=Math.PI,Yo=2*Ho,m=Ho/180,t=180/Ho,o=398600.5,Co=6378.137,$o=60/Math.sqrt(Co*Co*Co/o),zo=Co*$o/60,p=1/$o,Lo=.00108262998905,e=-253215306e-14,So=-161098761e-14,Uo=e/Lo,Bo=2/3;function l(o,t){for(var e=[31,o%4==0?29:28,31,30,31,30,31,31,30,31,30,31],s=Math.floor(t),n=1,a=0;a+e[n-1]<s&&n<12;)a+=e[n-1],n+=1;var d=n,r=s-a,i=24*(t-s),c=Math.floor(i),i=60*(i-c),h=Math.floor(i);return{mon:d,day:r,hr:c,minute:h,sec:60*(i-h)}}function i(o,t,e,s,n,a,d){var r=6<arguments.length&&void 0!==d?d:0;return 367*o-Math.floor(7*(o+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+e+1721013.5+((r/6e4+a/60+n)/60+s)/24}function x(o,t,e,s,n,a,d){if(o instanceof Date){var r=o;return i(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return i(o,t,e,s,n,a,d)}function Do(o,t){var e,s,n,a,d,r,i,c,h,m,p,l=o.e3,x=o.ee2,g=o.peo,M=o.pgho,f=o.pho,u=o.pinco,z=o.plo,y=o.se2,v=o.se3,b=o.sgh2,q=o.sgh3,w=o.sgh4,j=o.sh2,T=o.sh3,E=o.si2,F=o.si3,A=o.sl2,C=o.sl3,L=o.sl4,S=o.t,U=o.xgh2,D=o.xgh3,I=o.xgh4,R=o.xh2,O=o.xh3,_=o.xi2,k=o.xi3,P=o.xl2,Z=o.xl3,G=o.xl4,H=o.zmol,Y=o.zmos,$=t.init,B=t.opsmode,J=t.ep,K=t.inclp,N=t.nodep,Q=t.argpp,V=t.mp,W="y"===$?Y:Y+119459e-10*S,X=W+.0335*Math.sin(W),oo=y*(i=.5*(h=Math.sin(X))*h-.25)+v*(c=-.5*h*Math.cos(X)),to=E*i+F*c,eo=A*i+C*c+L*h,so=b*i+q*c+w*h,no=j*i+T*c;W="y"===$?H:H+.00015835218*S,X=W+.1098*Math.sin(W);var ao=oo+(x*(i=.5*(h=Math.sin(X))*h-.25)+l*(c=-.5*h*Math.cos(X))),ro=to+(_*i+k*c),io=eo+(P*i+Z*c+G*h),co=so+(U*i+D*c+I*h),ho=no+(R*i+O*c);return"n"===$&&(io-=z,co-=M,ho-=f,K+=ro-=u,J+=ao-=g,a=Math.sin(K),n=Math.cos(K),.2<=K?(Q+=co-=n*(ho/=a),N+=ho,V+=io):(e=a*(r=Math.sin(N)),s=a*(d=Math.cos(N)),e+=ho*d+ro*n*r,s+=-ho*r+ro*n*d,(N%=Yo)<0&&"a"===B&&(N+=Yo),m=V+Q+n*N,m+=io+co-ro*N*a,p=N,(N=Math.atan2(e,s))<0&&"a"===B&&(N+=Yo),Math.abs(p-N)>Ho&&(N<p?N+=Yo:N-=Yo),Q=m-(V+=io)-n*N)),{ep:J,inclp:K,nodep:N,argpp:Q,mp:V}}function s(o){var t=(o-2451545)/36525,e=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(e=e*m/240%Yo)<0&&(e+=Yo),e}function Io(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||1<arguments.length?s(x.apply(void 0,arguments)):s.apply(void 0,arguments)}function Ro(o,t){var e,s,n,a,d,r,i,c,h,m;o.t=t,o.error=0;var p=o.mo+o.mdot*o.t,l=o.argpo+o.argpdot*o.t,x=o.nodeo+o.nodedot*o.t;u=l,f=p;var g,M,f,u,z,y,v,b=o.t*o.t,q=x+o.nodecf*b;v=1-o.cc1*o.t,c=o.bstar*o.cc4*o.t,h=o.t2cof*b,1!==o.isimp&&(r=o.omgcof*o.t,g=1+o.eta*Math.cos(p),f=p+(M=r+o.xmcof*(g*g*g-o.delmo)),u=l-M,y=(z=b*o.t)*o.t,v=v-o.d2*b-o.d3*z-o.d4*y,c+=o.bstar*o.cc5*(Math.sin(f)-o.sinmao),h=h+o.t3cof*z+y*(o.t4cof+o.t*o.t5cof)),F=o.no;var w,j=o.ecco,T=o.inclo;if("d"===o.method&&(i=o.t,j=(w=function(o){var t,e,s,n,a,d,r,i,c=o.irez,h=o.d2201,m=o.d2211,p=o.d3210,l=o.d3222,x=o.d4410,g=o.d4422,M=o.d5220,f=o.d5232,u=o.d5421,z=o.d5433,y=o.dedt,v=o.del1,b=o.del2,q=o.del3,w=o.didt,j=o.dmdt,T=o.dnodt,E=o.domdt,F=o.argpo,A=o.argpdot,C=o.t,L=o.tc,S=o.gsto,U=o.xfact,D=o.xlamo,I=o.no,R=o.atime,O=o.em,_=o.argpm,k=o.inclm,P=o.xli,Z=o.mm,G=o.xni,H=o.nodem,Y=o.nm,$=.13130908,B=2.8843198,J=.37448087,K=5.7686396,N=.95240898,Q=1.8014998,V=1.050833,W=4.4108898,X=0,oo=0,to=(S+.0043752690880113*L)%Yo;if(O+=y*C,k+=w*C,_+=E*C,H+=T*C,Z+=j*C,0!==c){(0===R||C*R<=0||Math.abs(C)<Math.abs(R))&&(R=0,G=I,P=D),t=0<C?720:-720;for(var eo=381;381===eo;)d=2!==c?(r=v*Math.sin(P-$)+b*Math.sin(2*(P-B))+q*Math.sin(3*(P-J)),a=G+U,v*Math.cos(P-$)+2*b*Math.cos(2*(P-B))+3*q*Math.cos(3*(P-J))):(s=(i=F+A*R)+i,e=P+P,r=h*Math.sin(s+P-K)+m*Math.sin(P-K)+p*Math.sin(i+P-N)+l*Math.sin(-i+P-N)+x*Math.sin(s+e-Q)+g*Math.sin(e-Q)+M*Math.sin(i+P-V)+f*Math.sin(-i+P-V)+u*Math.sin(i+e-W)+z*Math.sin(-i+e-W),a=G+U,h*Math.cos(s+P-K)+m*Math.cos(P-K)+p*Math.cos(i+P-N)+l*Math.cos(-i+P-N)+M*Math.cos(i+P-V)+f*Math.cos(-i+P-V)+2*x*Math.cos(s+e-Q)+g*Math.cos(e-Q)+u*Math.cos(i+e-W)+z*Math.cos(-i+e-W)),d*=a,381===(eo=720<=Math.abs(C-R)?381:(oo=C-R,0))&&(P+=a*t+259200*r,G+=r*t+259200*d,R+=t);n=P+a*oo+r*oo*oo*.5,Y=I+(X=(Z=1!==c?n-2*H+2*to:n-H-_+to,(Y=G+r*oo+d*oo*oo*.5)-I))}return{atime:R,em:O,argpm:_,inclm:k,xli:P,mm:Z,xni:G,nodem:H,dndt:X,nm:Y}}({irez:o.irez,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,del1:o.del1,del2:o.del2,del3:o.del3,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,argpo:o.argpo,argpdot:o.argpdot,t:o.t,tc:i,gsto:o.gsto,xfact:o.xfact,xlamo:o.xlamo,no:o.no,atime:o.atime,em:j,argpm:u,inclm:T,xli:o.xli,mm:f,xni:o.xni,nodem:q,nm:F})).em,u=w.argpm,T=w.inclm,f=w.mm,q=w.nodem,F=w.nm),F<=0)return[!(o.error=2),!1];var E=Math.pow($o/F,Bo)*v*v,F=$o/Math.pow(E,1.5);if(1<=(j-=c)||j<-.001)return[!(o.error=1),!1];j<1e-6&&(j=1e-6),m=(f+=o.no*h)+u+q;var A=j;if(C=T,U=u%=Yo,S=q%=Yo,D=f=((m%=Yo)-u-q)%Yo,a=Math.sin(T),n=Math.cos(T),"d"===o.method){var C,L=Do(o,{inclo:o.inclo,init:"n",ep:A,inclp:C,nodep:S,argpp:U,mp:D,opsmode:o.operationmode}),A=L.ep,S=L.nodep,U=L.argpp,D=L.mp;if((C=L.inclp)<0&&(C=-C,S+=Ho,U-=Ho),A<0||1<A)return[!(o.error=3),!1]}"d"===o.method&&(a=Math.sin(C),n=Math.cos(C),o.aycof=-.5*Uo*a,15e-13<Math.abs(n+1)?o.xlcof=-.25*Uo*a*(3+5*n)/(1+n):o.xlcof=-.25*Uo*a*(3+5*n)/15e-13);var I=A*Math.cos(U);M=1/(E*(1-A*A));for(var R=A*Math.sin(U)+M*o.aycof,O=(D+U+S+M*o.xlcof*I-S)%Yo,_=O,k=9999.9,P=1;1e-12<=Math.abs(k)&&P<=10;)s=Math.sin(_),k=(O-R*(e=Math.cos(_))+I*s-_)/(k=1-e*I-s*R),.95<=Math.abs(k)&&(k=0<k?.95:-.95),_+=k,P+=1;var Z=I*e+R*s,G=I*s-R*e,H=I*I+R*R,Y=E*(1-H);if(Y<0)return[!(o.error=4),!1];var $=E*(1-Z),B=Math.sqrt(E)*G/$,J=Math.sqrt(Y)/$,K=Math.sqrt(1-H),N=E/$*(s-R-I*(M=G/(1+K))),Q=E/$*(e-I+R*M),V=Math.atan2(N,Q),W=(Q+Q)*N,X=1-2*N*N,oo=.5*Lo*(M=1/Y),to=oo*M;"d"===o.method&&(d=n*n,o.con41=3*d-1,o.x1mth2=1-d,o.x7thm1=7*d-1);var eo=$*(1-1.5*to*K*o.con41)+.5*oo*o.x1mth2*X;if(eo<1)return{position:!(o.error=6),velocity:!1};V-=.25*to*o.x7thm1*W;var so=S+1.5*to*n*W,no=C+1.5*to*n*a*X,ao=B-F*oo*o.x1mth2*W/$o,ro=J+F*oo*(o.x1mth2*X+1.5*o.con41)/$o,io=Math.sin(V),co=Math.cos(V),ho=Math.sin(so),mo=Math.cos(so),po=Math.sin(no),lo=Math.cos(no),xo=-ho*lo,go=mo*lo,Mo=xo*io+mo*co,fo=go*io+ho*co,uo=po*io;return{position:{x:eo*Mo*Co,y:eo*fo*Co,z:eo*uo*Co},velocity:{x:(ao*Mo+ro*(xo*co-mo*io))*zo,y:(ao*fo+ro*(go*co-ho*io))*zo,z:(ao*uo+ro*(po*co))*zo}}}function g(o,t){var e,s,n,a,d,r,i,c,h,m,p,l,x,g,M,f,u,z,y,v,b,q,w,j,T,E,F,A,C,L,S,U,D,I,R,O,_,k,P,Z,G,H,Y,$,B,J,K,N,Q,V,W=t.opsmode,X=t.satn,oo=t.epoch,to=t.xbstar,eo=t.xecco,so=t.xargpo,no=t.xinclo,ao=t.xmo,ro=t.xno,io=t.xnodeo;o.isimp=0,o.method="n",o.aycof=0,o.con41=0,o.cc1=0,o.cc4=0,o.cc5=0,o.d2=0,o.d3=0,o.d4=0,o.delmo=0,o.eta=0,o.argpdot=0,o.omgcof=0,o.sinmao=0,o.t=0,o.t2cof=0,o.t3cof=0,o.t4cof=0,o.t5cof=0,o.x1mth2=0,o.x7thm1=0,o.mdot=0,o.nodedot=0,o.xlcof=0,o.xmcof=0,o.nodecf=0,o.irez=0,o.d2201=0,o.d2211=0,o.d3210=0,o.d3222=0,o.d4410=0,o.d4422=0,o.d5220=0,o.d5232=0,o.d5421=0,o.d5433=0,o.dedt=0,o.del1=0,o.del2=0,o.del3=0,o.didt=0,o.dmdt=0,o.dnodt=0,o.domdt=0,o.e3=0,o.ee2=0,o.peo=0,o.pgho=0,o.pho=0,o.pinco=0,o.plo=0,o.se2=0,o.se3=0,o.sgh2=0,o.sgh3=0,o.sgh4=0,o.sh2=0,o.sh3=0,o.si2=0,o.si3=0,o.sl2=0,o.sl3=0,o.sl4=0,o.gsto=0,o.xfact=0,o.xgh2=0,o.xgh3=0,o.xgh4=0,o.xh2=0,o.xh3=0,o.xi2=0,o.xi3=0,o.xl2=0,o.xl3=0,o.xl4=0,o.xlamo=0,o.zmol=0,o.zmos=0,o.atime=0,o.xli=0,o.xni=0,o.bstar=to,o.ecco=eo,o.argpo=so,o.inclo=no,o.mo=ao,o.no=ro,o.nodeo=io,o.operationmode=W;var co=78/Co+1,ho=42/Co,mo=ho*ho*ho*ho;o.init="y",o.t=0;var po,lo,xo,go,Mo,fo,uo,zo=function(o){var t=o.ecco,e=o.epoch,s=o.inclo,n=o.opsmode,a=o.no,d=t*t,r=1-d,i=Math.sqrt(r),c=Math.cos(s),h=c*c,m=Math.pow($o/a,Bo),p=.75*Lo*(3*h-1)/(i*r),l=p/(m*m),x=m*(1-l*l-l*(1/3+134*l*l/81));a/=1+(l=p/(x*x));var g,M,f,u,z=Math.pow($o/a,Bo),y=Math.sin(s),v=z*r,b=1-5*h,q=-b-h-h,w=1/z,j=v*v,T=z*(1-t);return"a"===n?(g=e-7305,(u=(1.7321343856509375+(f=.017202791694070362)*(M=Math.floor(1e-8+g))+(f+Yo)*(g-M)+g*g*5075514194322695e-30)%Yo)<0&&(u+=Yo)):u=Io(e+2433281.5),{no:a,method:"n",ainv:w,ao:z,con41:q,con42:b,cosio:c,cosio2:h,eccsq:d,omeosq:r,posq:j,rp:T,rteosq:i,sinio:y,gsto:u}}({satn:X,ecco:o.ecco,epoch:oo,inclo:o.inclo,no:o.no,method:o.method,opsmode:o.operationmode}),yo=zo.ao,vo=zo.con42,bo=zo.cosio,qo=zo.cosio2,wo=zo.eccsq,jo=zo.omeosq,To=zo.posq,Eo=zo.rp,Fo=zo.rteosq,Ao=zo.sinio;o.no=zo.no,o.con41=zo.con41,o.gsto=zo.gsto,((o.error=0)<=jo||0<=o.no)&&(o.isimp=0,Eo<220/Co+1&&(o.isimp=1),xo=co,lo=mo,(M=(Eo-1)*Co)<156&&(lo=(po=(120-(xo=M<98?20:M-78))/Co)*po*po*po,xo=xo/Co+1),f=1/To,Z=1/(yo-xo),o.eta=yo*o.ecco*Z,l=o.eta*o.eta,p=o.ecco*o.eta,u=Math.abs(1-l),a=(i=(r=lo*Math.pow(Z,4))/Math.pow(u,3.5))*o.no*(yo*(1+1.5*l+p*(4+l))+.375*Lo*Z/u*o.con41*(8+3*l*(8+l))),o.cc1=o.bstar*a,d=0,1e-4<o.ecco&&(d=-2*r*Z*Uo*o.no*Ao/o.ecco),o.x1mth2=1-qo,o.cc4=2*o.no*i*yo*jo*(o.eta*(2+.5*l)+o.ecco*(.5+2*l)-Lo*Z/(yo*u)*(-3*o.con41*(1-2*p+l*(1.5-.5*p))+.75*o.x1mth2*(2*l-p*(1+l))*Math.cos(2*o.argpo))),o.cc5=2*i*yo*jo*(1+2.75*(l+p)+p*l),c=qo*qo,k=.5*(_=1.5*Lo*f*o.no)*Lo*f,P=-.46875*So*f*f*o.no,o.mdot=o.no+.5*_*Fo*o.con41+.0625*k*Fo*(13-78*qo+137*c),o.argpdot=-.5*_*vo+.0625*k*(7-114*qo+395*c)+P*(3-36*qo+49*c),H=-_*bo,o.nodedot=H+(.5*k*(4-19*qo)+2*P*(3-7*qo))*bo,G=o.argpdot+o.nodedot,o.omgcof=o.bstar*d*Math.cos(o.argpo),o.xmcof=0,1e-4<o.ecco&&(o.xmcof=-Bo*r*o.bstar/p),o.nodecf=3.5*jo*H*o.cc1,o.t2cof=1.5*o.cc1,15e-13<Math.abs(bo+1)?o.xlcof=-.25*Uo*Ao*(3+5*bo)/(1+bo):o.xlcof=-.25*Uo*Ao*(3+5*bo)/15e-13,o.aycof=-.5*Uo*Ao,go=1+o.eta*Math.cos(o.mo),o.delmo=go*go*go,o.sinmao=Math.sin(o.mo),o.x7thm1=7*qo-1,225<=2*Ho/o.no&&(o.method="d",o.isimp=1,x=o.inclo,Mo=function(o){var t,e,s,n,a,d,r,i,c,h,m,p,l,x,g,M,f,u,z,y,v,b,q,w,j,T,E,F,A,C,L,S,U,D,I,R,O,_,k,P,Z,G,H,Y,$,B,J,K,N,Q,V,W,X,oo,to,eo,so=o.epoch,no=o.ep,ao=o.argpp,ro=o.tc,io=o.inclp,co=o.nodep,ho=o.np,mo=no,po=Math.sin(co),lo=Math.cos(co),xo=Math.sin(ao),go=Math.cos(ao),Mo=Math.sin(io),fo=Math.cos(io),uo=mo*mo,zo=1-uo,yo=Math.sqrt(zo),vo=so+18261.5+ro/1440,bo=(4.523602-.00092422029*vo)%Yo,qo=Math.sin(bo),wo=Math.cos(bo),jo=.91375164-.03568096*wo,To=Math.sqrt(1-jo*jo),Eo=.089683511*qo/To,Fo=Math.sqrt(1-Eo*Eo),Ao=5.8351514+.001944368*vo,Co=.39785416*qo/To,Lo=Fo*wo+.91744867*Eo*qo,Co=Math.atan2(Co,Lo);Co+=Ao-bo;for(var So=Math.cos(Co),Uo=Math.sin(Co),Do=.1945905,Io=-.98088458,Ro=.91744867,Oo=.39785416,_o=lo,ko=po,Po=29864797e-13,Zo=1/ho,Go=0;Go<2;)K=-6*(t=Do*_o+Io*Ro*ko)*(a=-Mo*(r=-Do*ko+Io*Ro*_o)+fo*(i=Io*Oo))+uo*(-24*(m=t*go+(e=fo*r+Mo*i)*xo)*(f=a*go)-6*(l=-t*xo+e*go)*(g=a*xo)),N=-6*(t*(d=-Mo*(c=Io*ko+Do*Ro*_o)+fo*(h=Do*Oo))+(s=-Io*_o+Do*Ro*ko)*a)+uo*(-24*((p=s*go+(n=fo*c+Mo*h)*xo)*f+m*(u=d*go))+-6*(l*(M=d*xo)+(x=-s*xo+n*go)*g)),Q=-6*s*d+uo*(-24*p*u-6*x*M),V=6*e*a+uo*(24*m*g-6*l*f),W=6*(n*a+e*d)+uo*(24*(p*g+m*M)-6*(x*f+l*u)),X=6*n*d+uo*(24*p*M-6*x*u),$=($=3*(t*t+e*e)+(oo=12*m*m-3*l*l)*uo)+$+zo*oo,B=(B=6*(t*s+e*n)+(to=24*m*p-6*l*x)*uo)+B+zo*to,J=(J=3*(s*s+n*n)+(eo=12*p*p-3*x*x)*uo)+J+zo*eo,k=-.5*(P=Po*Zo)/yo,_=-15*mo*(Z=P*yo),G=m*l+p*x,H=p*l+m*x,Y=p*x-m*l,1===(Go+=1)&&(z=_,y=k,v=P,b=Z,q=G,w=H,j=Y,T=$,E=B,F=J,A=K,C=N,L=Q,S=V,U=W,D=X,I=oo,R=to,O=eo,Do=So,Io=Uo,Ro=jo,Oo=To,_o=Fo*lo+Eo*po,ko=po*Fo-lo*Eo,Po=4.7968065e-7);return{snodm:po,cnodm:lo,sinim:Mo,cosim:fo,sinomm:xo,cosomm:go,day:vo,e3:2*_*Y,ee2:2*_*H,em:mo,emsq:uo,gam:Ao,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:yo,se2:2*z*w,se3:2*z*j,sgh2:2*b*R,sgh3:2*b*(O-I),sgh4:-18*b*.01675,sh2:-2*y*U,sh3:-2*y*(D-S),si2:2*y*C,si3:2*y*(L-A),sl2:-2*v*E,sl3:-2*v*(F-T),sl4:-2*v*(-21-9*uo)*.01675,s1:_,s2:k,s3:P,s4:Z,s5:G,s6:H,s7:Y,ss1:z,ss2:y,ss3:v,ss4:b,ss5:q,ss6:w,ss7:j,sz1:T,sz2:E,sz3:F,sz11:A,sz12:C,sz13:L,sz21:S,sz22:U,sz23:D,sz31:I,sz32:R,sz33:O,xgh2:2*Z*to,xgh3:2*Z*(eo-oo),xgh4:-18*Z*.0549,xh2:-2*k*W,xh3:-2*k*(X-V),xi2:2*k*N,xi3:2*k*(Q-K),xl2:-2*P*B,xl3:-2*P*(J-$),xl4:-2*P*(-21-9*uo)*.0549,nm:ho,z1:$,z2:B,z3:J,z11:K,z12:N,z13:Q,z21:V,z22:W,z23:X,z31:oo,z32:to,z33:eo,zmol:(.2299715*vo-Ao+4.7199672)%Yo,zmos:(6.2565837+.017201977*vo)%Yo}}({epoch:oo,ep:o.ecco,argpp:o.argpo,tc:0,inclp:o.inclo,nodep:o.nodeo,np:o.no,e3:o.e3,ee2:o.ee2,peo:o.peo,pgho:o.pgho,pho:o.pho,pinco:o.pinco,plo:o.plo,se2:o.se2,se3:o.se3,sgh2:o.sgh2,sgh3:o.sgh3,sgh4:o.sgh4,sh2:o.sh2,sh3:o.sh3,si2:o.si2,si3:o.si3,sl2:o.sl2,sl3:o.sl3,sl4:o.sl4,xgh2:o.xgh2,xgh3:o.xgh3,xgh4:o.xgh4,xh2:o.xh2,xh3:o.xh3,xi2:o.xi2,xi3:o.xi3,xl2:o.xl2,xl3:o.xl3,xl4:o.xl4,zmol:o.zmol,zmos:o.zmos}),o.e3=Mo.e3,o.ee2=Mo.ee2,o.peo=Mo.peo,o.pgho=Mo.pgho,o.pho=Mo.pho,o.pinco=Mo.pinco,o.plo=Mo.plo,o.se2=Mo.se2,o.se3=Mo.se3,o.sgh2=Mo.sgh2,o.sgh3=Mo.sgh3,o.sgh4=Mo.sgh4,o.sh2=Mo.sh2,o.sh3=Mo.sh3,o.si2=Mo.si2,o.si3=Mo.si3,o.sl2=Mo.sl2,o.sl3=Mo.sl3,o.sl4=Mo.sl4,s=Mo.sinim,e=Mo.cosim,h=Mo.em,m=Mo.emsq,z=Mo.s1,y=Mo.s2,v=Mo.s3,b=Mo.s4,q=Mo.s5,w=Mo.ss1,j=Mo.ss2,T=Mo.ss3,E=Mo.ss4,F=Mo.ss5,A=Mo.sz1,C=Mo.sz3,L=Mo.sz11,S=Mo.sz13,U=Mo.sz21,D=Mo.sz23,I=Mo.sz31,R=Mo.sz33,o.xgh2=Mo.xgh2,o.xgh3=Mo.xgh3,o.xgh4=Mo.xgh4,o.xh2=Mo.xh2,o.xh3=Mo.xh3,o.xi2=Mo.xi2,o.xi3=Mo.xi3,o.xl2=Mo.xl2,o.xl3=Mo.xl3,o.xl4=Mo.xl4,o.zmol=Mo.zmol,o.zmos=Mo.zmos,g=Mo.nm,Y=Mo.z1,$=Mo.z3,B=Mo.z11,J=Mo.z13,K=Mo.z21,N=Mo.z23,Q=Mo.z31,V=Mo.z33,fo=Do(o,{inclo:x,init:o.init,ep:o.ecco,inclp:o.inclo,nodep:o.nodeo,argpp:o.argpo,mp:o.mo,opsmode:o.operationmode}),o.ecco=fo.ep,o.inclo=fo.inclp,o.nodeo=fo.nodep,o.argpo=fo.argpp,o.mo=fo.mp,uo=function(o){var t,e,s,n,a,d,r,i,c,h=o.cosim,m=o.argpo,p=o.s1,l=o.s2,x=o.s3,g=o.s4,M=o.s5,f=o.sinim,u=o.ss1,z=o.ss2,y=o.ss3,v=o.ss4,b=o.ss5,q=o.sz1,w=o.sz3,j=o.sz11,T=o.sz13,E=o.sz21,F=o.sz23,A=o.sz31,C=o.sz33,L=o.t,S=o.tc,U=o.gsto,D=o.mo,I=o.mdot,R=o.no,O=o.nodeo,_=o.nodedot,k=o.xpidot,P=o.z1,Z=o.z3,G=o.z11,H=o.z13,Y=o.z21,$=o.z23,B=o.z31,J=o.z33,K=o.ecco,N=o.eccsq,Q=o.emsq,V=o.em,W=o.argpm,X=o.inclm,oo=o.mm,to=o.nm,eo=o.nodem,so=o.irez,no=o.atime,ao=o.d2201,ro=o.d2211,io=o.d3210,co=o.d3222,ho=o.d4410,mo=o.d4422,po=o.d5220,lo=o.d5232,xo=o.d5421,go=o.d5433,Mo=o.dedt,fo=o.didt,uo=o.dmdt,zo=o.dnodt,yo=o.domdt,vo=o.del1,bo=o.del2,qo=o.del3,wo=o.xfact,jo=o.xlamo,To=o.xli,Eo=o.xni,Fo=.0043752690880113,Ao=.00015835218,Co=119459e-10,so=.00826<=to&&to<=.00924&&.5<=V?2:to<.0052359877&&.0034906585<to?1:0,Lo=X<.052359877||Ho-.052359877<X?0:-Co*z*(E+F);0!==f&&(Lo/=f);var So=X<.052359877||Ho-.052359877<X?0:-Ao*l*(Y+$),yo=v*Co*(A+C-6)-h*Lo+g*Ao*(B+J-6),zo=Lo;0!==f&&(yo-=h/f*So,zo+=So/f);var Uo,Do,Io,Ro,Oo,_o,ko,Po,Zo,Go=(U+S*Fo)%Yo;return V+=(Mo=u*Co*b+p*Ao*M)*L,X+=(fo=z*Co*(j+T)+l*Ao*(G+H))*L,W+=yo*L,eo+=zo*L,oo+=(uo=-Co*y*(q+w-14-6*Q)-Ao*x*(P+Z-14-6*Q))*L,0!==so&&(Zo=Math.pow(to/$o,Bo),2===so&&(Uo=V,Do=Q,Io=(V=K)*(Q=N),Ro=V<=.65?(e=3.616-13.247*V+16.29*Q,s=117.39*V-19.302-228.419*Q+156.591*Io,n=109.7927*V-18.9068-214.6334*Q+146.5816*Io,a=242.694*V-41.122-471.094*Q+313.953*Io,d=841.88*V-146.407-1629.014*Q+1083.435*Io,3017.977*V-532.114-5740.032*Q+3708.276*Io):(e=331.819*V-72.099-508.738*Q+266.724*Io,s=1582.851*V-346.844-2415.925*Q+1246.113*Io,n=1554.908*V-342.585-2366.899*Q+1215.972*Io,a=4758.686*V-1052.797-7193.992*Q+3651.957*Io,d=16178.11*V-3581.69-24462.77*Q+12422.52*Io,.715<V?29936.92*V-5149.66-54087.36*Q+31324.56*Io:1464.74-4664.75*V+3763.64*Q),ao=(Po=17891679e-13*(ko=3*(to*to)*(Zo*Zo)))*(_o=.75*(1+2*h+(c=h*h)))*(-.306-.44*(V-.64)),ro=Po*(1.5*(Oo=f*f))*e,io=(Po=3.7393792e-7*(ko*=Zo))*(1.875*f*(1-2*h-3*c))*s,co=Po*(-1.875*f*(1+2*h-3*c))*n,ho=(Po=2*(ko*=Zo)*7.3636953e-9)*(35*Oo*_o)*a,mo=Po*(39.375*Oo*Oo)*d,po=(Po=1.1428639e-7*(ko*=Zo))*(9.84375*f*(Oo*(1-2*h-5*c)+.33333333*(4*h-2+6*c)))*Ro,lo=Po*(f*(4.92187512*Oo*(-2-4*h+10*c)+6.56250012*(1+2*h-3*c)))*(V<.7?(i=4988.61*V-919.2277-9064.77*Q+5542.21*Io,r=4568.6173*V-822.71072-8491.4146*Q+5337.524*Io,4690.25*V-853.666-8624.77*Q+5341.4*Io):(i=161616.52*V-37995.78-229838.2*Q+109377.94*Io,r=218913.95*V-51752.104-309468.16*Q+146349.42*Io,170470.89*V-40023.88-242699.48*Q+115605.82*Io)),xo=(Po=2*ko*2.1765803e-9)*(29.53125*f*(2-8*h+c*(8*h-12+10*c)))*r,go=Po*(29.53125*f*(-2-8*h+c*(12+8*h-10*c)))*i,jo=(D+O+O-(Go+Go))%Yo,wo=I+uo+2*(_+zo-Fo)-R,V=Uo,Q=Do),1===so&&(bo=2*(vo=3*to*to*Zo*Zo)*(_o=.75*(t=1+h)*(1+h))*(1+Q*(.8125*Q-2.5))*17891679e-13,qo=3*vo*(t*=1.875*t*t)*(1+Q*(6.60937*Q-6))*2.2123015e-7*Zo,vo=vo*(.9375*f*f*(1+3*h)-.75*(1+h))*(s=1+2*Q)*21460748e-13*Zo,jo=(D+O+m-Go)%Yo,wo=I+k+uo+yo+zo-(R+Fo)),To=jo,to=(Eo=R)+(no=0)),{em:V,argpm:W,inclm:X,mm:oo,nm:to,nodem:eo,irez:so,atime:no,d2201:ao,d2211:ro,d3210:io,d3222:co,d4410:ho,d4422:mo,d5220:po,d5232:lo,d5421:xo,d5433:go,dedt:Mo,didt:fo,dmdt:uo,dndt:0,dnodt:zo,domdt:yo,del1:vo,del2:bo,del3:qo,xfact:wo,xlamo:jo,xli:To,xni:Eo}}({cosim:e,emsq:m,argpo:o.argpo,s1:z,s2:y,s3:v,s4:b,s5:q,sinim:s,ss1:w,ss2:j,ss3:T,ss4:E,ss5:F,sz1:A,sz3:C,sz11:L,sz13:S,sz21:U,sz23:D,sz31:I,sz33:R,t:o.t,tc:0,gsto:o.gsto,mo:o.mo,mdot:o.mdot,no:o.no,nodeo:o.nodeo,nodedot:o.nodedot,xpidot:G,z1:Y,z3:$,z11:B,z13:J,z21:K,z23:N,z31:Q,z33:V,ecco:o.ecco,eccsq:wo,em:h,argpm:0,inclm:x,mm:0,nm:g,nodem:0,irez:o.irez,atime:o.atime,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,del1:o.del1,del2:o.del2,del3:o.del3,xfact:o.xfact,xlamo:o.xlamo,xli:o.xli,xni:o.xni}),o.irez=uo.irez,o.atime=uo.atime,o.d2201=uo.d2201,o.d2211=uo.d2211,o.d3210=uo.d3210,o.d3222=uo.d3222,o.d4410=uo.d4410,o.d4422=uo.d4422,o.d5220=uo.d5220,o.d5232=uo.d5232,o.d5421=uo.d5421,o.d5433=uo.d5433,o.dedt=uo.dedt,o.didt=uo.didt,o.dmdt=uo.dmdt,o.dnodt=uo.dnodt,o.domdt=uo.domdt,o.del1=uo.del1,o.del2=uo.del2,o.del3=uo.del3,o.xfact=uo.xfact,o.xlamo=uo.xlamo,o.xli=uo.xli,o.xni=uo.xni),1!==o.isimp&&(n=o.cc1*o.cc1,o.d2=4*yo*Z*n,O=o.d2*Z*o.cc1/3,o.d3=(17*yo+xo)*O,o.d4=.5*O*yo*Z*(221*yo+31*xo)*o.cc1,o.t3cof=o.d2+2*n,o.t4cof=.25*(3*o.d3+o.cc1*(12*o.d2+10*n)),o.t5cof=.2*(3*o.d4+12*o.cc1*o.d3+6*o.d2*o.d2+15*n*(2*o.d2+n)))),Ro(o,0),o.init="n"}function a(o){return function(o){if(Array.isArray(o))return n(o)}(o)||function(o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o))return Array.from(o)}(o)||function(o,t){if(!o)return;if("string"==typeof o)return n(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);"Object"===e&&o.constructor&&(e=o.constructor.name);if("Map"===e||"Set"===e)return Array.from(o);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n(o,t)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(o,t){(null==t||t>o.length)&&(t=o.length);for(var e=0,s=new Array(t);e<t;e++)s[e]=o[e];return s}function d(o){return o*t}function r(o){return o*m}function f(o){var t=o.longitude,e=o.latitude,s=o.height,n=6378.137,a=.0033528106718309306,d=2*a-a*a,r=n/Math.sqrt(1-d*(Math.sin(e)*Math.sin(e)));return{x:(r+s)*Math.cos(e)*Math.cos(t),y:(r+s)*Math.cos(e)*Math.sin(t),z:(r*(1-d)+s)*Math.sin(e)}}return{constants:Object.freeze({__proto__:null,pi:Ho,twoPi:Yo,deg2rad:m,rad2deg:t,minutesPerDay:1440,mu:o,earthRadius:Co,xke:$o,vkmpersec:zo,tumin:p,j2:Lo,j3:e,j4:So,j3oj2:Uo,x2o3:Bo}),propagate:function(){for(var o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];var s=t[0],n=Array.prototype.slice.call(t,1);return Ro(s,1440*(x.apply(void 0,a(n))-s.jdsatepoch))},sgp4:Ro,twoline2satrec:function(o,t){var e=1440/(2*Ho),s=0,n={error:0};n.satnum=o.substring(2,7),n.epochyr=parseInt(o.substring(18,20),10),n.epochdays=parseFloat(o.substring(20,32)),n.ndot=parseFloat(o.substring(33,43)),n.nddot=parseFloat(".".concat(parseInt(o.substring(44,50),10),"E").concat(o.substring(50,52))),n.bstar=parseFloat("".concat(o.substring(53,54),".").concat(parseInt(o.substring(54,59),10),"E").concat(o.substring(59,61))),n.inclo=parseFloat(t.substring(8,16)),n.nodeo=parseFloat(t.substring(17,25)),n.ecco=parseFloat(".".concat(t.substring(26,33))),n.argpo=parseFloat(t.substring(34,42)),n.mo=parseFloat(t.substring(43,51)),n.no=parseFloat(t.substring(52,63)),n.no/=e,n.a=Math.pow(n.no*p,-2/3),n.ndot/=1440*e,n.nddot/=1440*e*1440,n.inclo*=m,n.nodeo*=m,n.argpo*=m,n.mo*=m,n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1;var a=l(s=n.epochyr<57?n.epochyr+2e3:n.epochyr+1900,n.epochdays),d=a.mon,r=a.day,i=a.hr,c=a.minute,h=a.sec;return n.jdsatepoch=x(s,d,r,i,c,h),g(n,{opsmode:"i",satn:n.satnum,epoch:n.jdsatepoch-2433281.5,xbstar:n.bstar,xecco:n.ecco,xargpo:n.argpo,xinclo:n.inclo,xmo:n.mo,xno:n.no,xnodeo:n.nodeo}),n},gstime:Io,jday:x,invjday:function(o,t){var e=o-2415019.5,s=e/365.25,n=1900+Math.floor(s),a=Math.floor(.25*(n-1901)),d=e-(365*(n-1900)+a)+1e-11;d<1&&(d=e-(365*(--n-1900)+(a=Math.floor(.25*(n-1901)))));var r=l(n,d),i=r.mon,c=r.day,h=r.hr,m=r.minute,p=r.sec-864e-9;return t?[n,i,c,h,m,Math.floor(p)]:new Date(Date.UTC(n,i-1,c,h,m,Math.floor(p)))},dopplerFactor:function(o,t,e){var s=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)+Math.pow(t.z-o.z,2)),n=t.x+e.x,a=t.y+e.y,d=t.z+e.z,r=Math.sqrt(Math.pow(n-o.x,2)+Math.pow(a-o.y,2)+Math.pow(d-o.z,2))-s;return 1+(r*=0<=r?1:-1)/299792.458},radiansToDegrees:d,degreesToRadians:r,degreesLat:function(o){if(o<-Ho/2||Ho/2<o)throw new RangeError("Latitude radians must be in range [-pi/2; pi/2].");return o*t},degreesLong:function(o){if(o<-Ho||Ho<o)throw new RangeError("Longitude radians must be in range [-pi; pi].");return o*t},radiansLat:function(o){if(o<-90||90<o)throw new RangeError("Latitude degrees must be in range [-90; 90].");return o*m},radiansLong:function(o){if(o<-180||180<o)throw new RangeError("Longitude degrees must be in range [-180; 180].");return o*m},geodeticToEcf:f,eciToGeodetic:function(o,t){for(var e=6378.137,s=Math.sqrt(o.x*o.x+o.y*o.y),n=.0033528106718309306,a=2*n-n*n,d=Math.atan2(o.y,o.x)-t;d<-Ho;)d+=Yo;for(;Ho<d;)d-=Yo;for(var r,i=0,c=Math.atan2(o.z,Math.sqrt(o.x*o.x+o.y*o.y));i<20;)r=1/Math.sqrt(1-a*(Math.sin(c)*Math.sin(c))),c=Math.atan2(o.z+e*r*a*Math.sin(c),s),i+=1;return{longitude:d,latitude:c,height:s/Math.cos(c)-e*r}},eciToEcf:function(o,t){return{x:o.x*Math.cos(t)+o.y*Math.sin(t),y:o.x*-Math.sin(t)+o.y*Math.cos(t),z:o.z}},ecfToEci:function(o,t){return{x:o.x*Math.cos(t)-o.y*Math.sin(t),y:o.x*Math.sin(t)+o.y*Math.cos(t),z:o.z}},ecfToLookAngles:function(o,t){var e,s,n,a,d,r,i,c,h,m,p,l,x,g,M=(s=t,n=(e=o).longitude,a=e.latitude,d=f(e),r=s.x-d.x,i=s.y-d.y,c=s.z-d.z,{topS:Math.sin(a)*Math.cos(n)*r+Math.sin(a)*Math.sin(n)*i-Math.cos(a)*c,topE:-Math.sin(n)*r+Math.cos(n)*i,topZ:Math.cos(a)*Math.cos(n)*r+Math.cos(a)*Math.sin(n)*i+Math.sin(a)*c});return m=(h=M).topS,p=h.topE,l=h.topZ,x=Math.sqrt(m*m+p*p+l*l),g=Math.asin(l/x),{azimuth:Math.atan2(-p,m)+Ho,elevation:g,rangeSat:x}}}});
